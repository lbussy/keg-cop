<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Keg Cop, a Home Brewing application">
    <meta name="author" content="Lee Bussy">

    <title>Keg Cop</title>

    <link rel="canonical" href="https://www.kegcop.com/">

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.4.1/cerulean/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <link rel="stylesheet" href="/common.css">
    <link rel="stylesheet" href="/loader.css">
    <script src="/loader.js"></script>
</head>

<body class="d-flex flex-column h-100">

    <div class="loader" id="loader"></div>

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <a class="navbar-brand" href="/">
                <img src="mstile-150x150.png" style="width:25px;height:25px;">
                &nbsp;Keg Cop
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01"
                aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarColor01">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/settings/">Settings  <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/help/">Help</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about/">About</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="navbar-brand nav-link active" target="_blank" href="https://docs.kegcop.com">?</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main role="main" class="flex-shrink-0">

        <div class="container" id="settingsApp" style="visibility:hidden;"> <!-- Container -->

            <div class="card border-dark mb-3"> <!-- Keg Cop Settings -->

                <ul class="nav nav-tabs"> <!-- Navigation Tab navigation -->

                    <li class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Taps</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" data-toggle="tab" href="#tap0">Tap 1</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap1">Tap 2</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap2">Tap 3</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap3">Tap 4</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap4">Tap 5</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap5">Tap 6</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap6">Tap 7</a>
                            <a class="dropdown-item" data-toggle="tab" href="#tap7">Tap 8</a>
                        </div>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#controller">Controller</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Temperature</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" data-toggle="tab" href="#tempcontrol">Control</a>
                            <a class="dropdown-item" data-toggle="tab" href="#sensorcontrol">Sensors</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Targets</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" data-toggle="tab" href="#targeturl">URL</a>
                            <a class="dropdown-item" data-toggle="tab" href="#targetcloud">Cloud</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Advanced</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" data-toggle="tab" href="#reset">Reset Controller</a>
                            <a class="dropdown-item" data-toggle="tab" href="#update">Update Application</a>
                            <a class="dropdown-item" data-toggle="tab" href="#wifi">Reset WiFi</a>
                        </div>
                    </li>

                </ul> <!-- Navigation tab navigation -->

                <div id="myTabContent" class="tab-content"> <!-- Navigation Tab contents -->

                    <div class="tab-pane fade active show" id="advanced"> <!-- Initial Page Tab -->
                        <div class="card-header">
                            <h4 class="card-title">Settings for Keg Cop</h4>
                        </div>
                        <div class="card-body">
                            <p>
                                Use the tabs above to navigate the various settings and customize Keg Cop for your own use. Be sure to use the
                                update button after changing a field.
                            </p>
                        </div>
                    </div> <!-- Initial Page Tab -->
                
                    <!-- Tap 0 Tab -->
                    <div class="tab-pane fade" id="tap0">

                        <div class="card-header">
                            <h4 class="card-title">Tap 1 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap0" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="0">
                            
                                <div class="form-group row">
                                    <label for="tap0ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap0ppu" id="tap0ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap0beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap0beername"
                                            id="tap0beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap0cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap0cap" id="tap0cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap0remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap0remain"
                                            id="tap0remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap0active" id="tap0active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap0active" id="tap0active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>                            

                        </div>

                    </div>
                    <!-- Tap 0 Tab -->

                    <div class="tab-pane fade" id="tap1"> <!-- Tap 1 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 2 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap1" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="1">
                            
                                <div class="form-group row">
                                    <label for="tap1ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap1ppu" id="tap1ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap1beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap1beername"
                                            id="tap1beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap1cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap1cap" id="tap1cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap1remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap1remain"
                                            id="tap1remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap1active" id="tap1active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap1active" id="tap1active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>                            

                        </div>

                    </div> <!-- Tap 1 Tab -->

                    <div class="tab-pane fade" id="tap2"> <!-- Tap 2 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 3 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap2" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="2">
                            
                                <div class="form-group row">
                                    <label for="tap2ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap2ppu" id="tap2ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap2beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap2beername"
                                            id="tap2beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap2cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap2cap" id="tap2cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap2remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap2remain"
                                            id="tap2remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap2active" id="tap2active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap2active" id="tap2active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>

                        </div>

                    </div> <!-- Tap 2 Tab -->

                    <div class="tab-pane fade" id="tap3"> <!-- Tap 3 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 4 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap3" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="3">
                            
                                <div class="form-group row">
                                    <label for="tap3ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap3ppu" id="tap3ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap3beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap3beername"
                                            id="tap3beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap3cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap3cap" id="tap3cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap3remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap3remain"
                                            id="tap3remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap3active" id="tap3active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap3active" id="tap3active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>
                            
                        </div>

                    </div> <!-- Tap 3 Tab -->

                    <div class="tab-pane fade" id="tap4"> <!-- Tap 4 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 5 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap4" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="4">
                            
                                <div class="form-group row">
                                    <label for="tap4ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap4ppu" id="tap4ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap4beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap4beername"
                                            id="tap4beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap4cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap4cap" id="tap4cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap4remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap4remain"
                                            id="tap4remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap4active" id="tap4active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap4active" id="tap4active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>
                            
                        </div>

                    </div> <!-- Tap 4 Tab -->

                    <div class="tab-pane fade" id="tap5"> <!-- Tap 5 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 6 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap5" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="5">
                            
                                <div class="form-group row">
                                    <label for="tap5ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap5ppu" id="tap5ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap5beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap5beername"
                                            id="tap5beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap5cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap5cap" id="tap5cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap5remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap5remain"
                                            id="tap5remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap5active" id="tap5active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap5active" id="tap5active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>
                            
                        </div>

                    </div> <!-- Tap 5 Tab -->

                    <div class="tab-pane fade" id="tap6"> <!-- Tap 6 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 7 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap6" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="6">
                            
                                <div class="form-group row">
                                    <label for="tap6ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap6ppu" id="tap6ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap6beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap6beername"
                                            id="tap6beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap6cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap6cap" id="tap6cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap6remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap6remain"
                                            id="tap6remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap6active" id="tap6active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap6active" id="tap6active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>
                            
                        </div>

                    </div> <!-- Tap 7 Tab -->

                    <div class="tab-pane fade" id="tap7"> <!-- Tap 7 Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Tap 8 Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="tap7" action="/settings/tapcontrol/" method="POST" onsubmit="return processPost(this);">

                                <input type="hidden" id="tapnum" name="tapnum" value="7">
                            
                                <div class="form-group row">
                                    <label for="tap7ppu" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Enter the pulses per gallon or liter depending upon system configuration for your flowmeter and layout">
                                        Pulses per Unit
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap7ppu" id="tap7ppu"
                                            min="10" max="99999" step="1" placeholder="21120" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap7beername" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the beverage to display on this tap">
                                        Beverage Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="tap7beername"
                                            id="tap7beername" minlength="1" maxlength="64"
                                            placeholder="Pudswiller Doors" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap7cap" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Capacity of this tap in gallons or liters depending on system configuration">
                                        Capacity
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap7cap" id="tap7cap"
                                            min=".0001" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <div class="form-group row">
                                    <label for="tap7remain" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Contents remaining in this tap in gallons or liters depending on system configuration">
                                        Remaining
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" name="tap7remain"
                                            id="tap7remain" min=".000" max="999" step=".0001" placeholder="5" required>
                                    </div>
                                </div>
                            
                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
                                        <div class="col-sm-4">
                                        </div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn tap display on or off">Tap usage</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is active">
                                                        <input type="radio" class="form-check-input" name="tap7active" id="tap7active" value="active">
                                                        Active
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <label class="form-check-label" data-toggle="tooltip" title="Tap is inactive">
                                                        <input type="radio" class="form-check-input" name="tap7active" id="tap7active" value="inactive"
                                                            checked="">
                                                        Inactive
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
                            
                            </form>
                            
                        </div>

                    </div> <!-- Tap 7 Tab -->

                    <div class="tab-pane fade" id="controller"> <!-- Controller Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Keg Cop Configuration</h4>
                        </div>
                        <div class="card-body">


                            <form id="controller" action="/settings/controller/" method="POST" onsubmit="return processPost(this);">

                                <div class="form-group row">
                                    <label for="hostname" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Host name for the controller to access during use (do not include the '.local' portion)">
                                        Host Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="hostname"
                                            id="hostname" minlength="3" maxlength="32"
                                            placeholder="kegcop" required>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="breweryname" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the brewery or brewer to be displayed">
                                        Brewery Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="breweryname"
                                            id="breweryname" minlength="3" maxlength="32"
                                            placeholder="My Homebrew" required>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="kegeratorname" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Name of the kegerator or controller">
                                        Kegerator Name
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="kegeratorname"
                                            id="kegeratorname" minlength="3" maxlength="32"
                                            placeholder="My Kegerator" required>
                                    </div>
                                </div>

                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
										<div class="col-sm-2">&nbsp;</div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Toggle between metric or imperial units">Units</p>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="Change the application to use metric units (℃ or Liters)">
                                                    <input type="radio" class="form-check-input" name="imperial" id="imperial" value="false">
                                                    Metric
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="Change the to use imperial units (℉ or Gallons)">
                                                    <input type="radio" class="form-check-input" name="imperial" id="imperial" value="true"
                                                        checked="">
                                                    Imperial
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
										<div class="col-sm-2">&nbsp;</div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn solenoid on or off">Solenoid Relay</p>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="Energize the solenoid relay">
                                                    <input type="radio" class="form-check-input" name="tapsolenoid" id="tapsolenoid" value="energized">
                                                    Energized
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="De-energize the solenoid relay">
                                                    <input type="radio" class="form-check-input" name="tapsolenoid" id="tapsolenoid" value="deenergized"
                                                        checked="">
                                                    De-energized
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset class="form-group">
                                    <div class="row justify-content-center">
										<div class="col-sm-2">&nbsp;</div>
                                        <div class="col-sm-2">
                                            <p data-toggle="tooltip" title="Turn on legacy functionality">Functionality</p>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="Standard Keg Cop functionality">
                                                    <input type="radio" class="form-check-input" name="rpintscompat" id="rpintscompat" value="kegcop" checked="">
                                                    Keg Cop
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="RaspberryPints 2.0 compatible">
                                                    <input type="radio" class="form-check-input" name="rpintscompat" id="rpintscompat" value="rpintscompat">
                                                    RaspberryPints
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <label class="form-check-label" data-toggle="tooltip" title="RaspberryPints 2.0 with RandR+ mods compatible">
                                                    <input type="radio" class="form-check-input" name="rpintscompat" id="rpintscompat" value="randr">
                                                    RPints RandR+
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                </fieldset>

                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>

                            </form>

                        </div>

                    </div> <!-- Controller Tab -->

                    <!-- Temp Control Tab -->
					<div class="tab-pane fade" id="tempcontrol">
                        <div class="card-header">
                            <h4 class="card-title">Temperature Control</h4>
                        </div>
                        <div class="card-body">

                            <form class="form-group" id="tempcontrol" action="/settings/tempcontrol/" method="POST" onsubmit="return processPost(this);">

                                <div class="row col-12">
								
                                    <div class="col-3">
                                        <div class="row form-group">
                                            <label for="setpoint" class="col-form-label" data-toggle="tooltip"
                                                title="Enter the temperature setpoint in your selected units (&#x2109; or &#x2103;)"> Set Point
                                            </label>
                                        </div>
                                        <div class="row form-group">
                                            <label for="controlpoint" class="col-form-label" data-toggle="tooltip"
                                                title="Enter the control point to use for temp control">Control Point
                                            </label>
                                        </div>
                                    </div>
									
                                    <div class="col-5">
                                        <div class="row form-group">
                                            <input type="number" class="form-control" name="setpoint" id="setpoint" min="0" max="80"
                                                step=".1" placeholder="40">
                                        </div>
                                        <div class="row form-group">
                                            <select class="form-control" name="controlpoint" id="controlpoint">
                                                <option value="0">Room Temp Sensor</option>
                                                <option value="1">Tower Temp Sensor</option>
                                                <option value="2">Upper Chamber Temp Sensor</option>
                                                <option value="3">Lower Chamber Temp Sensor</option>
                                                <option value="4">Keg Temp Sensor</option>
                                            </select>
                                        </div>
                                    </div>

									<div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Temperature control enabled">
                                                            <input type="radio" class="form-check-input" name="enablecontrol" id="enablecontrol"
															value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Temperature control disabled">
                                                            <input type="radio" class="form-check-input" name="enablecontrol" id="enablecontrol"
															value="false">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>

                                </div>

                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>

                            </form>

                        </div>
                    </div>
					<!-- Temp Control Tab -->

                    <!-- Sensor Control Tab -->
                    <div class="tab-pane fade" id="sensorcontrol">
                        <div class="card-header">
                            <h4 class="card-title">Temperature Sensor Control</h4>
                        </div>
                        <div class="card-body">

                            <!-- Sensor Control Form-->
                            <form class="form-group" id="sensorcontrol" action="/settings/sensorcontrol/" method="POST" onsubmit="return processPost(this);">

                                <!-- Room Sensor Control -->
                                <div class="row col-sm-12 justify-content-center">
                                    
                                    <!-- Calibration Offset -->
                                    <div class="col-sm-3">
                                        <label
                                            for="calRoom" class="col-form-label" data-toggle="tooltip"
                                            title="Value by which the Room temperature display will be offset">Room
                                        </label>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" name="calroom" id="calroom"
                                            min="-25" max="25" step=".01" placeholder="0.0">
                                    </div>
                                    <!-- Calibration Offset -->
                                    
                                    <!-- Enable Sensor -->
                                    <div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor enabled">
                                                            <input type="radio" class="form-check-input" name="enableroom" id="enableroom" value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor disabled">
                                                            <input type="radio" class="form-check-input" name="enableroom" id="enableroom" value="false">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <!-- Enable Sensor -->

                                </div>
                                <!-- Room Sensor Control -->

                                <hr/>

                                <!-- Tower Sensor Control -->
                                <div class="row col-sm-12 justify-content-center">
                                
                                    <!-- Calibration Offset -->
                                    <div class="col-sm-3">
                                        <label
                                            for="calTower" class="col-form-label" data-toggle="tooltip"
                                            title="Value by which the Tower temperature display will be offset">Tower
                                        </label>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" name="caltower" id="caltower"
                                            min="-25" max="25" step=".01" placeholder="0.0">
                                    </div>
                                    <!-- Calibration Offset -->
                                    
                                    <!-- Enable Sensor -->
                                    <div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor enabled">
                                                            <input type="radio" class="form-check-input" name="enabletower" id="enabletower" value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor disabled">
                                                            <input type="radio" class="form-check-input" name="enabletower" id="enabletower" value="false">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <!-- Enable Sensor -->
                                    
                                </div>
                                <!-- Tower Sensor Control -->

                                <hr/>

                                <!-- Upper Chamber Sensor Control -->
                                <div class="row col-sm-12 justify-content-center">
                                
                                    <!-- Calibration Offset -->
                                    <div class="col-sm-3">
                                        <label
                                            for="calupper" class="col-form-label" data-toggle="tooltip"
                                            title="Value by which the Upper Chamber temperature display will be offset">Upper Chamber
                                        </label>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" name="calupper" id="calupper"
                                            min="-25" max="25" step=".01" placeholder="0.0">
                                    </div>
                                    <!-- Calibration Offset -->

                                    <!-- Enable Sensor -->
                                    <div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor enabled">
                                                            <input type="radio" class="form-check-input" name="enableupper" id="enableupper" value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor disabled">
                                                            <input type="radio" class="form-check-input" name="enableupper" id="enableupper" value="false">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <!-- Enable Sensor -->

                                </div>
                                <!-- Upper Chamber Sensor Control -->

                                <hr/>

                                <!-- Lower Chamber Sensor Control -->
                                <div class="row col-sm-12 justify-content-center">

                                    <!-- Calibration Offset -->
                                    <div class="col-sm-3">
                                        <label
                                            for="callower" class="col-form-label" data-toggle="tooltip"
                                            title="Value by which the Lower Chamber temperature display will be offset">Lower Chamber
                                        </label>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" name="callower" id="callower"
                                            min="-25" max="25" step=".01" placeholder="0.0">
                                    </div>
                                    <!-- Calibration Offset -->

                                    <!-- Enable Sensor -->
                                    <div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor enabled">
                                                            <input type="radio" class="form-check-input" name="enablelower" id="enablelower" value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor disabled">
                                                            <input type="radio" class="form-check-input" name="enablelower" id="enablelower" value="false">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <!-- Enable Sensor -->

                                </div>
                                <!-- Lower Chamber Sensor Control -->

                                <hr/>

                                <!-- Keg Temperature Sensor Control -->
                                <div class="row col-sm-12 justify-content-center">

                                    <!-- Calibration Offset -->
                                    <div class="col-sm-3">
                                        <label
                                            for="calkeg" class="col-form-label" data-toggle="tooltip"
                                            title="Value by which the Keg temperature display will be offset">Keg
                                        </label>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" name="calkeg" id="calkeg"
                                            min="-25" max="25" step=".01" placeholder="0.0">
                                    </div>
                                    <!-- Calibration Offset -->

                                    <!-- Enable Sensor -->
                                    <div class="col-sm-4">
                                        <fieldset class="form-group">
                                            <div class="row justify-content-center">
                                                <div class="col-sm-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor enabled">
                                                            <input type="radio" class="form-check-input" name="enablekeg" id="enablekeg" value="true">
                                                            Enabled
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <label class="form-check-label" data-toggle="tooltip" title="Sensor disabled">
                                                            <input type="radio" class="form-check-input" name="enablekeg" id="enablekeg" value="false"
                                                                checked="">
                                                            Disabled
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                                <!-- Keg Temperature Sensor Control -->

                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>

                            </form> <!-- Sensor Control Form-->
                        </div>

                    </div>
                    <!-- Sensor Control Tab -->
                
                    <div class="tab-pane fade" id="targeturl"> <!-- URL Target Tab -->

                        <div class="card-header">
                            <h4 class="card-title">Local Target Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="targeturl" action="/settings/targeturl/" method="POST" onsubmit="return processPost(this);">

                                <div class="form-group row">
                                    <label for="targeturl" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Full URL to target system">
                                        Target URL
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="targeturl"
                                            id="targeturl" minlength="3" maxlength="128"
                                            placeholder="http://kegscreen.local/taplist/api/pour/">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="targetfreq" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Frequency in seconds to update the target (10 to 900 seconds)">Post Frequency</label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" id="targetfreq" name="targetfreq"
                                            min="10" max="900" step="1" placeholder="30">
                                    </div>
                                </div>
								
                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>
								
                            </form>

                        </div>

                    </div> <!-- URL Target Tab -->

                    <div class="tab-pane fade" id="targetcloud"> <!-- Cloud Target Tab -->
                        <div class="card-header">
                            <h4 class="card-title">Cloud Target Configuration</h4>
                        </div>
                        <div class="card-body">

                            <form id="cloudtype" action="/settings/cloudurl/" method="POST" onsubmit="return processPost(this);">

                                <div class="form-group row">
                                    <label for="cloudtype" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Select the cloud target to which the system will post data">
                                        Cloud Target
                                    </label>
                                    <div class="col-sm-10">
                                        <select class="form-control" name="cloudtype" id="cloudtype">
                                            <option value = "0">Cloud 1</option>
                                            <option value = "1">Cloud 2</option>
                                            <option value = "2">Cloud 3</option>
                                            <option value = "3">Cloud 4</option>
                                            <option value = "4">Cloud 5</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="cloudkey" class="col-sm-2 col-form-label"
                                        data-toggle="tooltip"
                                        title="Key supplied by cloud system">
                                        Cloud Key
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="cloudkey"
                                            id="cloudkey" minlength="3" maxlength="64"
                                            placeholder="01234567890ABCDEF01234567890ABCDEF">
                                    </div>
								</div>

                                <div class="form-group row">
                                    <label for="cloudfreq" class="col-sm-2 col-form-label" data-toggle="tooltip"
                                        title="Frequency in minutes to update the target (15 to 60 minutes)">Post Frequency</label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" id="cloudfreq" name="cloudfreq"
                                            min="15" max="60" step="1" placeholder="15">
                                    </div>
                                </div>

                                <div class="row col-sm-12 justify-content-center">
                                    <button class="btn btn-primary" id="submitSettings"
                                        onclick="if(!this.form.checkValidity(this)){return (false);}">Update</button>
                                </div>

							</form>

                        </div>
                    </div> <!-- Cloud Target Tab -->
                
                    <div class="tab-pane fade" id="reset"> <!-- Reset Controller Tab -->
                        <div class="card-header">
                            <h4 class="card-title">Reset Controller</h4>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                You can perform a simple reset on your Keg Cop by pressing the button below. This
                                has the same effect as pressing the reset button on the controller, and will not
                                harm your settings.
                            </p>
                            <p class="card-text">
                                <a href="/reset/" class="btn btn-warning">Reset Controller</a>
                            </p>
                        </div>
                    </div> <!-- Reset Controller Tab -->

                    <div class="tab-pane fade" id="update"> <!-- Update Application Tab -->
                        <div class="card-header">
                            <h4 class="card-title">Update Application</h4>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                Your Keg Cop can be updated over the internet to the latest version of the Keg Cop
                                firmware.  Check for available updates by clicking "Check Version" below.
                            </p>
                            <p class="card-text">
                                <a href="/ota1/" class="btn btn-primary">Check Version</a>
                            </p>
                        </div>
                    </div> <!-- Update Application Tab -->

                    <div class="tab-pane fade" id="wifi"> <!-- Reset WiFi Tab -->
                        <div class="card-header">
                            <h4 class="card-title">Reset WiFi</h4>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                If you plan on relocating your Keg Cop to a new network, you should reset the WiFi
                                connection settings.
                            </p>
                            <p class="card-text"></p>
                                If you are sure you want to completely reset your Keg Cop's WiFi configuration,
                                click the red "Reset WiFi" button below. You will have to re-configure via the
                                Access Point to join this device back to your local WiFi network.
                            </p>
                            <p class="card-text">
                                <a href="/wifireset/" class="btn btn-danger">Reset WiFi</a>
                            </p>
                        </div>
                    </div> <!-- Reset WiFi Tab -->
                
                </div> <!-- Navigation Tab contents -->

            </div> <!-- Keg Cop Settings -->

        </div> <!-- Container -->

    </main>

    <footer class="footer mt-auto py-3">
        <div class="container">
            <span class="text-muted">Copyright &copy; 2019-2020, Lee C. Bussy</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        toggleLoader("on");
        var loaded = 0; // Hold data load status
        var numReq = 2; // Number of JSON required
        var hostname = window.location.hostname;
        var originalHostnameConfig;
        var imperial;
        var hashLoc;
        var posted = false;

        // Attach the event after the page loads (multi-browser)
        if (window.addEventListener)
            window.addEventListener("load", loadPage, false);
        else if (window.attachEvent)
            window.attachEvent("onload", loadPage);
        else window.onload = loadPage;

        // Page data load

        function loadPage() { // Make triple sure the whole DOM loaded
            if (document.readyState === 'ready' || document.readyState === 'complete') {
                populatePage();
            } else {
                document.onreadystatechange = function () {
                    if (document.readyState == "complete") {
                        populatePage();
                    }
                }
            }
        }

        function populatePage() { // Get page data
            $(document).tooltip({
                'selector': '[data-toggle=tooltip]',
                'toggleEnabled': true
            });
            populateFlow();
            populateConfig();
            loadHash();
            pollComplete();
        }

        function repopulatePage(doSpinner = false) { // Reload data if we need it
            if (doSpinner) {
                toggleLoader("on");
            }
            loaded = 0;
            populateFlow();
            populateConfig();
            pollComplete();
        }

        function loadHash() { // Link to tab via hash value
            var url = document.location.toString();
            if (url.match('#')) {
                $('.nav-tabs a[href="#' + url.split('#')[1] + '"]').tab('show');
            }

            // Change hash for page-reload
            $('.nav-tabs a').on('shown.bs.tab', function (e) {
                window.location.hash = e.target.hash;
            });
        }

        function populateFlow(callback = null) { // Get flowmeter settings
            var url = "/flow/";
            var flow = $.getJSON(url, function () {
            })
                .done(function (flow) {
                    var numTaps = flow["taps"].length;
                    try {
                        for (var i = 0; i < numTaps; i++) {
                            $('input[name="tap' + i + 'ppu"]').val(parseInt(flow.taps[i].ppu), 10);
                            $('input[name="tap' + i + 'beername"]').val(flow.taps[i].name);
                            $('input[name="tap' + i + 'cap"]').val(parseFloat(flow.taps[i].capacity).toFixed(4));
                            $('input[name="tap' + i + 'remain"]').val(parseFloat(flow.taps[i].remaining).toFixed(4));
                            if (flow.taps[i].active) {
                                $('input[name="tap' + i + 'active"]')[0].checked = true;
                            } else {
                                $('input[name="tap' + i + 'active"]')[1].checked = true;
                            }
                        }
                    }
                    catch {
                        alert("Unable to parse configuration data from SPIFFS.");
                    }
                })
                .fail(function () {
                    alert("Unable to retrieve configuration data from SPIFFS.");
                })
                .always(function () {
                    // Can post-process here
                    if (loaded < numReq) {
                        loaded++;
                    }
                    if (typeof callback == "function") {
                        callback();
                    }
                });
        }

        function populateConfig(callback = null) { // Get configuration settings
            var url = "/config/";
            var config = $.getJSON(url, function () {
            })
                .done(function (config) {
                    try {
                        $('input[name="hostname"]').val(config.hostname);
                        originalHostnameConfig = $('input[name="hostname"]').val();
                        $('input[name="breweryname"]').val(config.copconfig.breweryname);
                        $('input[name="kegeratorname"]').val(config.copconfig.kegeratorname);
                        if (config.copconfig.imperial) {
                            imperial = true;
                            $('input:radio[name="imperial"]')[1].checked = true;
                        } else {
                            imperial = false;
                            $('input:radio[name="imperial"]')[0].checked = true;
                        }
                        if (config.copconfig.tapsolenoid) {
                            $('input:radio[name="tapsolenoid"]')[0].checked = true;
                        } else {
                            $('input:radio[name="tapsolenoid"]')[1].checked = true;
                        }
                        if (config.copconfig.rpintscompat) {
                            if (config.copconfig.randr) {
                                $('input:radio[name="rpintscompat"]')[2].checked = true;
                            } else {
                                $('input:radio[name="rpintscompat"]')[1].checked = true;
                            }
                        } else {
                            $('input:radio[name="rpintscompat"]')[0].checked = true;
                        }
                        $('input[name="setpoint"]').val(parseFloat(config.temps.setpoint).toFixed(1));
                        $('select[name="controlpoint"] option[value=' + parseInt(config.temps.controlpoint, 10) + ']').attr('selected', 'selected');
                        if (config.temps.controlenabled) {
                            $('input:radio[name="enablecontrol"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enablecontrol"]')[1].checked = true;
                        }

                        if (config.temps.roomenabled) {
                            $('input:radio[name="enableroom"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enableroom"]')[1].checked = true;
                        }
                        $('input[name="calroom"]').val(parseFloat(config.temps.room).toFixed(2));
                        if (config.temps.towerenabled) {
                            $('input:radio[name="enabletower"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enabletower"]')[1].checked = true;
                        }
                        $('input[name="caltower"]').val(parseFloat(config.temps.tower).toFixed(2));
                        if (config.temps.upperenabled) {
                            $('input:radio[name="enableupper"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enableupper"]')[1].checked = true;
                        }
                        $('input[name="calupper"]').val(parseFloat(config.temps.upper).toFixed(2));
                        if (config.temps.lowerenabled) {
                            $('input:radio[name="enablelower"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enablelower"]')[1].checked = true;
                        }
                        $('input[name="callower"]').val(parseFloat(config.temps.lower).toFixed(2));
                        if (config.temps.kegenabled) {
                            $('input:radio[name="enablekeg"]')[0].checked = true;
                        } else {
                            $('input:radio[name="enablekeg"]')[1].checked = true;
                        }
                        $('input[name="calkeg"]').val(parseFloat(config.temps.keg).toFixed(2));

                        $('input[name="targeturl"]').val(config.urltarget.url);
                        $('input[name="targetfreq"]').val(parseInt(config.urltarget.freq, 10));
                        $('select[name="cloudtype"] option[value=' + parseInt(config.cloud.type, 10) + ']').attr('selected', 'selected');
                        $('input[name="cloudkey"]').val(config.cloud.key);
                        $('input[name="cloudfreq"]').val(parseInt(config.cloud.freq), 10);
                    }
                    catch {
                        alert("Unable to parse configuration data from SPIFFS.");
                    }
                })
                .fail(function () {
                    alert("Unable to retrieve configuration data from SPIFFS.");
                })
                .always(function () {
                    // Can post-process here
                    if (loaded < numReq) {
                        loaded++;
                    }
                    if (typeof callback == "function") {
                        callback();
                    }
                });
        }

        function isIP(hostname) { // Bool: is this an IP address
            if (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(hostname)) {
                return (true)
            } else {
              return (false)
            }
        }

        function isMDNS(hostname) { // Bool: Is this an mDNS host name
            if (hostname.endsWith(".local")) {
                return (true);
            } else {
                return (false);
            }
        }

        function pollComplete() { // Poll to see if entire page is loaded
            if (loaded == numReq) {
                posted = true;
                finishPage();
            } else {
                setTimeout(pollComplete, 300); // try again in 300 milliseconds
            }
        }

        function finishPage() { // Display page
            toggleLoader("off");
        }

        // POST Handlers:

        function processPost(obj) {
            posted = false;
            event.preventDefault();
            hashLoc = window.location.hash;
            var $form = $(obj);
            var tapnum;
            url = $form.attr("action");

            $("button[id='submitSettings']").prop('disabled', true);
            $("button[id='submitSettings']").html('<i class="fa fa-spinner fa-spin"></i> Updating');

            tapnum = $form.find("input[name='tapnum']").val();
            processTapPost(url, obj, tapnum);
            buttonClearDelay();
        }

        function processTapPost(url, obj, tapNum) {
            // Handle tap posts

            // Get form data
            var $form = $(obj),
                ppu = $form.find("input[name='tap" + tapNum + "ppu']").val(),
                beername = $form.find("input[name='tap" + tapNum + "beername']").val(),
                cap = $form.find("input[name='tap" + tapNum + "cap']").val(),
                remain = $form.find("input[name='tap" + tapNum + "remain']").val(),
                active = $form.find("input[name='tap" + tapNum + "active']:checked").val();

			// Process post
			data = {
                tap: tapNum,
                ppu: ppu,
                beername: beername,
                cap: cap,
                remain: remain,
                active: active
			}
			postData(url, data);
        }

        function processControllerPost(url, obj) {
            // Handle controller posts

            // Get form data
            var $form = $(obj),
                    hostnameVal = $form.find("input[name='hostname']").val(),
                    brewerynameVal = $form.find("input[name='breweryname']").val(),
                    kegeratornameVal = $form.find("input[name='kegeratorname']").val()
                    imperialVal = $("[name='imperial']:checked").val(),
                    tapsolenoidVal = $("[name='tapsolenoid']:checked").val(),
                    rpintscompatVal = $("[name='rpintscompat']:checked").val();

            // Hold some data about what we changed
            var reloadpage = false;
            var hostnamechanged = false;
            var unitschanged = false;

            // Decide if we changed units   
            if ((imperial) != (imperialVal == 'true')) {
                unitschanged = true;
            } else {
                unitschanged = false;
            }

            // Decide if we accessed via IP or non-mDNS name
            var confirmText = '';
            if (!(hostnameVal == originalHostnameConfig)) {
                hostnamechanged = true;
                if (isIP(hostname)) {
                    confirmText = 'You have connected with an IP address. Changing the hostname may have unintended consequences. Do you want to proceed?';
                    reloadpage = false;
                } else if (!isMDNS(hostname)) {
                    reloadpage = 'You are not using an mDNS name. Changing the hostname may have unintended consequences. Do you want to proceed?';
                    reloadpage = false;
                } else {
                    reloadpage = true;
                }
            }
            if (confirmText && (!confirm(confirmText))) {
                // Bail out on post
                return;
            } else {
                // Process post
                originalHostnameConfig = hostnameVal; // Pick up changed host name
                data = {
                    hostname: hostnameVal,
                    breweryname: brewerynameVal,
                    kegeratorname: kegeratornameVal,
                    imperial: imperialVal,
                    tapsolenoid: tapsolenoidVal,
                    rpintscompat: rpintscompatVal
                }
                if (hostnamechanged && reloadpage) {
                    var protocol = window.location.protocol;
                    var path = window.location.pathname;
                    var newpage = protocol + "//" + hostnameVal + ".local" + path + hashLoc;
                    postData(url, data, newpage);
                } else if (unitschanged) {
                    postData(url, data, false, true);
                } else {
                    postData(url, data, false, false);
                }
            }
        }

        function processTempControlPost(url, obj) {
            // Handle temperature control posts

            // Get form data
            var $form = $(obj),
                setpoint = $form.find("input[name='setpoint']").val(),
                controlpoint = $form.find("select[name='controlpoint']").val(),
                enablecontrol = $form.find("input[name='enablecontrol']:checked").val();

			// Process post
			data = {
                setpoint: setpoint,
                controlpoint: controlpoint,
                enablecontrol: enablecontrol
			}
			postData(url, data);
        }

        function processSensorControlPost(url, obj) {
            // Handle sensor control posts

            // Get form data
            var $form = $(obj),
                calroom = $form.find("input[name='calroom']").val(),
                enableroom = $form.find("input[name='enableroom']:checked").val(),
                caltower = $form.find("input[name='caltower']").val(),
                enabletower = $form.find("input[name='enabletower']:checked").val(),
                calupper = $form.find("input[name='calupper']").val(),
                enableupper = $form.find("input[name='enableupper']:checked").val(),
                callower = $form.find("input[name='callower']").val(),
                enablelower = $form.find("input[name='enablelower']:checked").val(),
                calkeg = $form.find("input[name='calkeg']").val(),
                enablekeg = $form.find("input[name='enablekeg']:checked").val();

			// Process post
			data = {
                calroom: calroom,
                enableroom: enableroom,
                caltower: caltower,
                enabletower: enabletower,
                calupper: calupper,
                enableupper: enableupper,
                callower: callower,
                enablelower: enablelower,
                calkeg: calkeg,
                enablekeg: enablekeg
			}
            postData(url, data);
        }

        function processTargetUrlPost(url, obj) {
            // Handle target URL posts

            // Get form data
            var $form = $(obj),
            targeturl = $form.find("input[name='targeturl']").val(),
            targetfreq = $form.find("input[name='targetfreq']").val();

			// Process post
			data = {
                targeturl: targeturl,
                targetfreq: targetfreq
			}
            postData(url, data);
        }

        function processTargetCloudPost(url, obj) {
            // Handle target cloud posts

            // Get form data
            var $form = $(obj),
                cloudtype = $form.find("select[name='cloudtype']").val(),
                cloudkey = $form.find("input[name='cloudkey']").val(),
                cloudfreq = $form.find("input[name='cloudfreq']").val()

            // Process post
			data = {
                cloudtype: cloudtype,
                cloudkey: cloudkey,
                cloudfreq: cloudfreq
            }
            postData(url, data);
        }

        function postData(url, data, newpage = false, newdata = false) {
            $.ajax({
                url: url,
                type: 'POST',
                data: data,
                success: function (data) {
                    //
                },
                error: function (data) {
                    alert('POST failed.');
                },
                complete: function (data) {
                    if (newpage) {
                        window.location.href = newpage;
                    } else if (newdata) {
                        repopulatePage(true);
                    }
                    posted = true;
                }
            });
        }
        
        function buttonClearDelay() { // Poll to see if entire page is loaded
            if (posted) {
                $("button[id='submitSettings']").prop('disabled', false);
                $("button[id='submitSettings']").html('Update');
                posted = false;
            } else {
                setTimeout(buttonClearDelay, 500); // try again in 300 milliseconds
            }
        }

    </script>

</body>

</html>
